<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/reset.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>食べ食べプラン</title>
  </head>

  <body>
    <!-- G1-3-1に対応している画面です -->
    <div>
      <!-- header部分 -->
      <div>
        <p>メニューを6食選択</p>
      </div>
      <!-- メニュー絞り込み部分 -->
      <div>
        <div><p>メニューからおまかせ選択</p></div>
        <div>
          <ul>
            <li>牛肉</li>
            <li>豚肉</li>
            <li>鶏肉</li>
            <li>魚</li>
            <li>その他</li>
          </ul>
        </div>
      </div>
      <!-- mainコンテンツ部分 -->
      <div>
        <!-- 食材フィルター -->
        <div>
          <div><button>食材フィルター</button></div>
          <div><button>並び変え</button></div>
        </div>
        <!-- コンテンツ部分 -->
        <div id="mainContent"></div>
      </div>
    </div>
    <script type="text/javascript">
      // ここに数値を格納
      const menuArray = [
        ["チリハンバーグ", "shiyo.png", "17.5"],
        ["パスタ", "shiyo.png", "18.5"],
        ["サーモン", "shiyo.png", "8.5"],
      ];

      let totalCount = 0;

      // 表示領域の確保
      const mainContent = document.getElementById("mainContent");
      for (let i = 0; i < menuArray.length; i++) {
        // 1食ごとの数量変更
        let count = 0;

        const menuWrapper = document.createElement("div");
        menuWrapper.setAttribute("class", "menuWrapper");

        const menuText = document.createElement("p");
        menuText.setAttribute("class", "menuText");
        menuText.innerHTML = menuArray[i][0];
        const menuImage = document.createElement("img");
        menuImage.setAttribute("src", "./img/" + menuArray[i][1]);
        //   画像サイズのためのcss
        menuImage.style.width = "100%";
        const menuSugar = document.createElement("div");
        menuSugar.setAttribute("class", "menuSugar");
        menuSugar.innerHTML = "糖質は" + menuArray[i][2] + "g";

        //   wrapperに子要素の追加;
        menuWrapper.appendChild(menuText);
        menuWrapper.appendChild(menuImage);
        menuWrapper.appendChild(menuSugar);

        //   横並びボタン要素
        const buttonArea = document.createElement("div");
        const deleteButtun = document.createElement("button");
        deleteButtun.innerHTML = "削除";
        deleteButtun.setAttribute("class", "deleteButtun");
        const addButtun = document.createElement("button");
        addButtun.innerHTML = "追加";
        addButtun.setAttribute("class", "addButtun");

        buttonArea.appendChild(deleteButtun);
        buttonArea.appendChild(addButtun);

        buttonArea.style.display = "flex";
        buttonArea.style.justifyContent = "space-between";

        // buttonの発火処理;
        const clickDelete = deleteButtun.addEventListener("click", () => {
          deleteButtun.disabled = false;

          if (totalCount <= 0) {
            // 追加ボタンのクリックを不可にする
            deleteButtun.disabled = true;
          } else if (totalCount > 0 || totalCount < 7) {
            count--;
            totalCount--;
            menuCount.textContent = count + "食";
          }
          console.log(totalCount);
        });

        const clickAdd = addButtun.addEventListener("click", () => {
          if (totalCount > 6) {
            // 追加ボタンのクリックを不可にする
            addButtun.disabled = true;
            deleteButtun.disabled = false;
          } else if (totalCount < 0) {
            // 追加ボタンのクリックを不可にする
            deleteButtun.disabled = true;
          } else {
            addButtun.disabled = false;
            deleteButtun.disabled = false;
            count++;
            totalCount++;
            menuCount.textContent = count + "食";
          }
          console.log(totalCount);
        });

        //   食数のカウント表示
        const menuCountArea = document.createElement("div");
        menuCountArea.setAttribute("class", "menuCountArea");
        const menuCount = document.createElement("p");
        menuCount.textContent = count + "食";
        menuCountArea.appendChild(menuCount);

        //   部品接続
        menuWrapper.appendChild(buttonArea);
        menuWrapper.appendChild(menuCountArea);
        mainContent.appendChild(menuWrapper);
      }

      // 選択数チェックの関数
      const choiseCount = () => {
        if (totalCount == 7) {
          // 追加ボタンのクリックを不可にする
          addButtun.setAttribute("class", "disable");
        }
      };
    </script>

    <!-- js要素作成後にcssをかけるため記述 -->
    <link rel="stylesheet" href="css/style.css" />
  </body>
</html>
